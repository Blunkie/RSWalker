program new;
{$define SMART}
{$define SRL}
{$I SRL/OSR.simba}
{$I OSRWalker/Walker.simba}

procedure WhileMoving(Sender:TObject; pos:TPoint);
begin
  WriteLn('>>> ', pos);
end;


var
  RSW:TRSWalker;
  path:TPointArray;
begin
  //setup srl
  srl.DisableDebug := True;
  Smart.EnableDrawing := True;
  Smart.Init();

  RSW.Init('world.png');
  AddOnTerminate(@RSW.Free);
  
  RSW.walkStyle := wsSPS;
  RSW.anyAngle  := True;
  RSW.skipClose := 15;
  RSW.onMoveEvent := @WhileMoving;

  path := [Point(4658, 2756), Point(4654, 2791), Point(4654, 2830), Point(4661, 2865), Point(4680, 2887), Point(4726, 2889), Point(4748, 2871), Point(4767, 2846), Point(4779, 2820), Point(4784, 2787), Point(4791, 2757), Point(4819, 2737), Point(4825, 2769)];
  path.Reverse();
  RSW.WalkPath(path);
end.
