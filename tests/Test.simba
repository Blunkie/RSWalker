program new;
{.$define SMART}
{$define SRL}
{$I SRL/OSR.simba}
{$I OSRWalker/Walker.simba}

procedure WhileMoving(Sender:TObject; pos:TPoint);
begin
  WriteLn('>>> ', pos);
end;


var
  RSW:TRSWalker;
  path:TPointArray;
begin
  //setup srl
  srl.DisableDebug := True;
  //Smart.EnableDrawing := True;
  //Smart.Init();

  RSW.Init('law-altar.png');
  AddOnTerminate(@RSW.Free);

  RSW.walkStyle := wsRegular;
  RSW.anyAngle  := True;
  RSW.skipClose := 15;
  RSW.onMoveEvent := @WhileMoving;

  path := [Point(198, 213), Point(155, 195), Point(136, 170), Point(134, 136), Point(145, 105), Point(175, 88), Point(226, 89), Point(255, 113), Point(260, 152), Point(256, 184), Point(226, 198), Point(201, 188), Point(199, 159), Point(198, 138)];
  //path.Reverse();
  RSW.WalkPath(path);
end.
